<head>
	<meta charset="utf-8">
	<script src="jquery/jquery.min.js"></script>
	<script src="country-codes/country-codes.js"></script>
	<script src="bootstrap/bootstrap.min.js"></script>
	<script src="bootstrap/bootstrap-slider.min.js"></script>
	
	<script src="D3/d3.v3.min.js"></script>
	
	<link rel="stylesheet" type="text/css" href="d3-geomap/css/d3.geomap.css">
	
	<script src="d3-geomap/vendor/d3.geomap.dependencies.min.js"></script>
	<script src="d3-geomap/js/d3.geomap.js"></script>
	
	
	<link rel="stylesheet" type="text/css" href="Parcoords/d3.parcoords.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/outlinebutton.css">
	<link rel="stylesheet" type="text/css" href="LineChart/lineChart.css">
	
	<script src="D3/d3.svg.multibrush.js"></script>
	<script src="Parcoords/d3.parcoords.js"></script>
	
	<script src="underscorejs/underscore.js"></script>
	<script src="underscorejs/underscore.math.js"></script>

	<link rel="stylesheet" type="text/css" href="bootstrap/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="bootstrap/bootstrap-slider.min.css">
	
	
  <!-- Bootstrap Form Helpers -->
  <script src="bootstrap/bootstrap-formhelpers.js"></script>
	<script src="bootstrap/bootstrap-formhelpers-countries.js"></script>
	<script src="bootstrap/bootstrap-formhelpers-countries.en_US.js"></script>
	
	<link rel="stylesheet" type="text/css" href="bootstrap/bootstrap-formhelpers.css">
	
	<style>

		#chart {
			width: 370px;
			height:310px;
		}

		h4 {
			width: 30%;
			margin-left: 15%;
			display: inline;
		}â€‹
		
		body * {
		   font-size: 1em !important;
		   color: #000 !important;
		   font-family: Arial !important;
		}
		
		.box {
			width:30px;
			height:30px;
			margin-bottom:2px;
			margin-top: 2px;
		}
	</style>
</head>
<body>
	<div id="header" class="col-xs-12">		
		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">
			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
				<div class="row">
				  <div class="col-xs-2">
					<div class="box btn-country1"> </div>
				  </div>
				  <div class="col-xs-10">
						<div id="pais1" class="bfh-selectbox bfh-countries pais1" data-flags="true"></div>
				  </div>
				</div>					
			</div>
			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
				<div class="row">
				  <div class="col-xs-2">
					<div class="box btn-country2"> </div>
				  </div>
				  <div class="col-xs-10">
						<div id="pais2" class="bfh-selectbox bfh-countries pais2" data-flags="true"></div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
				<div class="row">
				  <div class="col-xs-2">
					<div class="box btn-country3"> </div>
				  </div>
				  <div class="col-xs-10">
						<div id="pais3" class="bfh-selectbox bfh-countries pais3" data-flags="true"></div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
				<div class="row">
				  <div class="col-xs-2">
					<div class="box btn-country4"> </div>
				  </div>
				  <div class="col-xs-10">
						<div id="pais4" class="bfh-selectbox bfh-countries pais4" data-flags="true"></div>
				  </div>
				</div>
			</div>
		</div>
		<div class="col-xs-12 col-sm-6 col-md-6 col-lg-8 slider-margin-top">
			<div class="slider-margin-sides">
				<input style="width: 100%;" id="ex13" type="text"/>
			</div>
		</div>
	</div>
	
	<div class="col-xs-12" style="align-items: center; margin-top: 20px;">
		<div class="col-xs-12 col-sm-8 col-md-4 col-lg-4">
		<!-- ################## LINE CHART ################# -->
			<div id="lineChart"></div>
		</div>
		<div class="col-xs-offset-2 col-xs-8 col-sm-offset-0 col-sm-4 col-md-3 col-lg-3">
		<!-- ################## RADIO ################# -->
			<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
				<h4>Crimes</h4>
				<button class="btn outline btn-crime-selector">Burglary</button>
				<button class="btn outline btn-crime-selector">Homicide</button>
				<button class="btn outline btn-crime-selector">Rape</button>
				<button class="btn outline btn-crime-selector">Theft</button>
			</div>
			<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
				<h4>Indicators</h4>
				<button class="btn outline btn-indicator-selector">Education</button>
				<button class="btn outline btn-indicator-selector">GDP</button>
				<button class="btn outline btn-indicator-selector">Migration</button>
				<button class="btn outline btn-indicator-selector">Unemployment</button>
			</div>
		</div>
		<div class="col-xs-12 col-sm-12 col-md-5 col-lg-5">
		<!-- ################## MAP ################# -->
			<div id="map"></div>
		</div>
	</div>
	
	<div class="col-xs-12" style="display: flex; align-items: center; margin-top: 20px;">
		<div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
		<!-- ################## Parallel Coords ################# -->
			<div id="example" class="parcoords" style="width:100%;height:200px;"></div>
		</div>
		<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4">
		<!-- ################## Radar Chart ################# -->
			<div id="radar-background">	
				<div id="body">
					<div id="chart">
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
		
	<script src="radarChart.js"></script>
	<script src="LineChart/lineChart.js"></script>
	<script type="text/javascript" src="radarScript.js"></script>
	<script src="GeomapScript.js"></script>
	
<script src="js/brushing.js"></script>

<script>


var selectedYear = 2003;
var slideStarted = false;
var selectedCountries = ['-', '-', '-', '-'];
var crimeName = "";
var indicatorName = "";

$(document).ready(function(){
	
	initializeCodes();
	
	function updateCountry(countryName, countryID){
		selectedCountries[countryID-1] = countryName;
		ChangeHighlighted(countryName, countryID);
		ChangeRadarValues(countryName, countryID);
		LoadLineChart(crimeName + indicatorName, selectedCountries)
	}
	
	$('.bfh-countries>a>span.bfh-selectbox-option').text('Choose a country');
	
	$('.bfh-countries').on('change.bfhselectbox', function(e) {
		updateCountry($('#' + this.id + '>a>span.bfh-selectbox-option').text(), this.id[4])
	});
	
	$("#ex13").slider({
		tooltip: 'always',
    ticks: [2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015],
    ticks_labels: [2003,'','','','','','','','','','','',2015],
    ticks_snap_bounds: 1
	});
	
	$('#ex13').on('slideStop', function (e) {
				var changed = (e.value != selectedYear);
        if(changed){
					//console.log('Year changed to ' + e.value);
					selectedYear = e.value;
				}
    });
	
	function selectButtonDeselectOthers(selfButton, classToDeselect, classToAdd){
		removeOnly = selfButton.hasClass(classToAdd);
		$(classToDeselect).removeClass(classToAdd);
		if(classToDeselect == '.btn-crime-selector')
				crimeName = "";
		else
			indicatorName = "";
		if(!removeOnly){
			selfButton.addClass(classToAdd);
			if(classToDeselect == '.btn-crime-selector')
				crimeName = selfButton.html();
			else
				indicatorName = selfButton.html();
		}
		LoadLineChart(crimeName + indicatorName, selectedCountries)
	}
	
	$('.btn-crime-selector').click(function(){
		selectButtonDeselectOthers($(this), '.btn-crime-selector', 'selected');
	});
	
	$('.btn-indicator-selector').click(function(){
		selectButtonDeselectOthers($(this), '.btn-indicator-selector', 'selected');
	});
	
	LoadLineChart(crimeName + indicatorName, selectedCountries)
});

</script>